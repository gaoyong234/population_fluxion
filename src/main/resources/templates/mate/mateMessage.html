<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>配偶信息</title>
    <script src="../../static/plugins/jQuery/jquery-2.2.3.min.js"></script>
    <link rel="stylesheet" href="../../static/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../static/plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="../../static/plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="../../static/css/style.css">
    <link rel="stylesheet" href="../../static/plugins/angularjs/toaster.min.css">
    <script src="../../static/plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="../../static/plugins/angularjs/angular.min.js"></script>
    <link rel="stylesheet" href="../../static/plugins/angularjs/pagination.css">
    <script type="text/javascript" src="../../static/plugins/angularjs/pagination.js"></script>
    <script src="../../static/js/showLoading.js" type="text/javascript" charset="utf-8"></script>
    <style>

        .form-control1{
            width:15% ;
            display: inline-block;
        }
        .form-control2{
            width:45% ;
            display: inline-block;
        }
        .s-job{
            margin: 15px;
        }
        .button_1{
            margin-left: 40%;
            margin-right: 80px;
        }

    </style>
    <script>
        var app = angular.module("myApp", []);
        app.controller("myController", function ($scope, $http) {
            //获取全部省信息
            $http({
                url: "/Province/findProvince",
                method: "post"
            }).success(function (response) {
                $scope.allProvince = response;
            })
            //获取省下的市
            $scope.getCity = function () {
                var provinceId = $scope.mate.mateProvince;
                $scope.mate.mateArea='';
                $scope.mate.mateCounty='';
                $http({
                    url: "/Province/findCity",
                    method: "post",
                    params:{"provinceId":provinceId}
                }).success(function (response) {
                    $scope.allCity = response;
                })
            }
            //获取市下的县
            $scope.getCounty = function () {
                var provinceId = $scope.mate.mateProvince;
                var cityId = $scope.mate.mateCity;
                $scope.mate.mateArea='';
                $http({
                    url: "/Province/findCounty",
                    method: "post",
                    params:{"provinceId":provinceId,"cityId":cityId}
                }).success(function (response) {
                    $scope.allCount = response;
                })
            }
            //获取县下的乡镇
            $scope.getArea = function () {
                var province = $scope.mate.mateProvince;
                var city = $scope.mate.mateCity;
                var count = $scope.mate.mateCounty;
                $http({
                    url: "/Province/findArea",
                    method: "post",
                    params:{"province":province,"city":city,"area":count}
                }).success(function (response) {
                    $scope.allTown = response;
                })
            }
            //查询所有有关从业状况信息
            $http({
                url:"/Dic/findDicByParentId",
                method:"post",
                params:{"prentId":500}
            }).success(function (response) {
                $scope.jobState=response;
            })
            //表单验证
            $scope.formVerify = function(mate){

            }
            //返回结果提示
            $scope.showModalButton1 = function (slogan) {
                showModal({
                    title: "温馨提示",  //提示的标题
                    content: slogan,  //提示的内容
                    showCancel: false,  //是否显示取消按钮，默认为 true
                    cancelText: '取消',  //取消按钮的文字，默认为"取消"，最多 4 个字符
                    cancelColor: "#fff",  //取消按钮的文字颜色，默认为"#000000"
                    cancelBgColor: '#4c4c4c',  //取消按钮的背景颜色
                    confirmText: '确定',
                    confirmColor: '#fff',
                    confirmBgColor: '#ff130a',
                    success: function () {

                    }
                });
            }
            //数据提交
            $scope.addMate = function () {
                var mate = $scope.mate;
                $http({
                    url:"/Mate/addMate",
                    method:"post",
                    params:mate
                }).success(function (response) {
                    $scope.showModalButton1(response.slogan);
                })
            }
        });
    </script>
</head>
<body ng-app="myApp" ng-controller="myController">
<div>
    <h4 class="alert alert-infoalert alert-info">填写配偶信息</h4>
</div>
<div>
    <table class="table table-bordered table-striped">
        <tr>
            <td>配偶姓名:</td>
            <td><input ng-model="mate.mateName" class="form-control form-control1"></td>
        </tr>
        <tr>
            <td>身份证号码:</td>
            <td><input ng-model="mate.mateNumber" class="form-control form-control2"/></td>
        </tr>
        <tr>
            <td>现居住地址:</td>
            <td>
                <select ng-model="mate.mateProvince" ng-change="getCity()" class="form-control form-control1">
                    <option value="">请选择</option>
                    <option ng-repeat="prov in allProvince"
                            ng-value="prov.id">{{prov.name}}</option>
                </select>
                省
                <select ng-model="mate.mateCity" ng-change="getCounty()" class="form-control form-control1">
                    <option value="">请选择</option>
                    <option ng-repeat="cit in allCity" ng-value="cit.id">{{cit.name}}</option>
                </select>
                市
                <select ng-model="mate.mateCounty" ng-change="getArea()" class="form-control form-control1">
                    <option value="">请选择</option>
                    <option ng-repeat="coun in allCount" ng-value="coun.area">{{coun.name}}</option>
                </select>
                县(区)
                <select ng-model="mate.mateArea" class="form-control form-control1">
                    <option value="">请选择</option>
                    <option ng-repeat="tow in allTown" ng-value="tow.town">{{tow.name}}</option>
                </select>
                乡(镇、街办)
                <input ng-model="mate.mateVillage" class="form-control form-control1"/>村(社区)
            </td>
        </tr>
        <tr>
            <td></td>
            <td><input ng-model="mate.spareStr" class="form-control form-control2"/>(门楼细址)</td>
        </tr>
        <tr>
            <td>从业状况:</td>
            <td>
                <span ng-repeat="job in jobState" class="s-job">
                    <input type="radio" name="background" ng-model="mate.background" ng-value="job.id">{{job.name}}
                </span>
            </td>
        </tr>
        <tr>
            <td>工作单位:</td>
            <td>
                <input ng-model="mate.workUnit"class="form-control form-control2" />
            </td>
        </tr>
        <tr>
            <td>本人联系电话:</td>
            <td>
                <input ng-model="mate.matePhone" class="form-control form-control2"/>
            </td>
        </tr>
    </table>
    <button class="btn btn-success button_1" ng-click="addMate()">保存</button>
    <button class="btn btn-info button_2">下一项</button>
</div>

</body>
</html>